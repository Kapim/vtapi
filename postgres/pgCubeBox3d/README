================================================
========== COPY TO POSTGRESQL PLUGINS ==========
================================================
cp /home/ivolf/pgCubeBox3d/dist/libpgCubeBox3d.so /usr/lib/postgresql/9.1/lib/plugins/libpgCubeBox3d.so


==================================
========== LOAD LIBRARY ==========
==================================
LOAD '$libdir/plugins/libpgCubeBox3d.so';


=====================================
========== CREATE FUNCTION ==========
=====================================
CREATE OR REPLACE FUNCTION box3d2cube(box3d) RETURNS cube
AS '$libdir/plugins/libpgCubeBox3d.so', 'box3d2cube'
LANGUAGE C STRICT;

CREATE OR REPLACE FUNCTION cube2box3d(cube) RETURNS box3d
AS '$libdir/plugins/libpgCubeBox3d.so', 'cube2box3d'
LANGUAGE C STRICT;


======================================
========== VALIDATION QUERY ==========
======================================
SELECT ST_AsEWKT(locations), box3d_out(locations), box3d2cube(locations), cube2box3d(box3d2cube(locations))
FROM sunar.tracks
WHERE ST_NPoints(locations) < 5
LIMIT 5;